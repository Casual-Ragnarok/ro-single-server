<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_191) on Tue Oct 15 01:49:30 CST 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>_0500_MOB_or_NPC_Commands (RO - rAthena Script Commands v20190306 API)</title>
<meta name="date" content="2019-10-15">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="_0500_MOB_or_NPC_Commands (RO - rAthena Script Commands v20190306 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10,"i32":10,"i33":10,"i34":10,"i35":10,"i36":10,"i37":10,"i38":10,"i39":10,"i40":10,"i41":10,"i42":10,"i43":10};
var tabs = {65535:["t0","所有方法"],2:["t2","实例方法"],8:["t4","具体方法"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="class-use/_0500_MOB_or_NPC_Commands.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>上一个类</li>
<li><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0501_Time_Related.html" title="exp.ro.cmd.ch._05_mob_npc中的类"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html" target="_top">框架</a></li>
<li><a href="_0500_MOB_or_NPC_Commands.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">exp.ro.cmd.ch._05_mob_npc</div>
<h2 title="类 _0500_MOB_or_NPC_Commands" class="title">类 _0500_MOB_or_NPC_Commands</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>exp.ro.cmd.ch._05_mob_npc._0500_MOB_or_NPC_Commands</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">_0500_MOB_or_NPC_Commands</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">Object</a></pre>
<div class="block"><pre>
======================================
|0500.- Mob / NPC - related commands.|
======================================
</pre></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>构造器概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="构造器概要表, 列表构造器和解释">
<caption><span>构造器</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">构造器和说明</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_0500_MOB_or_NPC_Commands--">_0500_MOB_or_NPC_Commands</a></span>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span id="t0" class="activeTableTab"><span>所有方法</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">实例方法</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">具体方法</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_addmonsterdrop--">_addmonsterdrop</a></span>()</code>
<div class="block">
<font color="red">
addmonsterdrop &lt;monster id&gt;,&lt;item id&gt;,&lt;rate&gt;;
</font>

addmonsterdrop "&lt;monster name&gt;",&lt;item id&gt;,&lt;rate&gt;;
delmonsterdrop &lt;monster id&gt;,&lt;item id&gt;;
delmonsterdrop "&lt;monster name&gt;",&lt;item id&gt;;
        
        These commands will temporarily add or delete a monster drop, which will be reset
        when the mob database reloads or the server shuts down.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_announce--">_announce</a></span>()</code>
<div class="block">
<font color="red">
announce "&lt;text&gt;",&lt;flag&gt;{,&lt;fontColor&gt;{,&lt;fontType&gt;{,&lt;fontSize&gt;{,&lt;fontAlign&gt;{,&lt;fontY&gt;}}}}};
</font>

        
        This command will broadcast a message to all or most players, similar to</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_areaannounce--">_areaannounce</a></span>()</code>
<div class="block">
<font color="red">
areaannounce "&lt;map name&gt;",&lt;x1&gt;,&lt;y1&gt;,&lt;x2&gt;,&lt;y2&gt;,"&lt;text&gt;",&lt;flag&gt;{,&lt;fontColor&gt;{,&lt;fontType&gt;{,&lt;fontSize&gt;{,&lt;fontAlign&gt;{,&lt;fontY&gt;}}}}}};
</font>

        
        This command works like 'announce' but will only broadcast to characters
        residing in the specified x1/y1-x2/y2 rectangle on the map given.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_areamobuseskill--">_areamobuseskill</a></span>()</code>
<div class="block">
<font color="red">
areamobuseskill "&lt;map name&gt;",&lt;x&gt;,&lt;y&gt;,&lt;range&gt;,&lt;mob id&gt;,&lt;skill id&gt;,&lt;skill level&gt;,&lt;cast time&gt;,&lt;cancelable&gt;,&lt;emotion&gt;,&lt;target type&gt;;
</font>

areamobuseskill "&lt;map name&gt;",&lt;x&gt;,&lt;y&gt;,&lt;range&gt;,&lt;mob id&gt;,"&lt;skill name&gt;",&lt;skill level&gt;,&lt;cast time&gt;,&lt;cancelable&gt;,&lt;emotion&gt;,&lt;target type&gt;;
        
        This command will make all monsters of the specified mob ID in the specified
        area use the specified skill.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_callshop--">_callshop</a></span>()</code>
<div class="block">
<font color="red">
callshop "&lt;name&gt;",&lt;option&gt;;
</font>

        
        These are a series of commands used to create dynamic shops.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_chatmes--">_chatmes</a></span>()</code>
<div class="block">
<font color="red">
chatmes "&lt;message&gt;"{,"&lt;NPC name&gt;"};
</font>

        
        This command will display a message in the waitingroom (chat) of the NPC.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_clone--">_clone</a></span>()</code>
<div class="block">
<font color="red">
clone "&lt;map name&gt;",&lt;x&gt;,&lt;y&gt;,"&lt;event&gt;",&lt;char id&gt;{,&lt;master_id&gt;{,&lt;mode&gt;{,&lt;flag&gt;,&lt;duration&gt;}}}
</font>

        
        This command creates a monster which is a copy of another player.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_cmdothernpc--">_cmdothernpc</a></span>()</code>
<div class="block">
<font color="red">
cmdothernpc "&lt;npc name&gt;","&lt;command&gt;";
</font>

        
        This is simply "donpcevent &lt;npc name&gt;::OnCommand&lt;command&gt;".</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_delwaitingroom--">_delwaitingroom</a></span>()</code>
<div class="block">
<font color="red">
delwaitingroom {"&lt;NPC object name"};
</font>

        
        This command will delete a waiting room.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_disablenpc--">_disablenpc</a></span>()</code>
<div class="block">
<font color="red">
disablenpc "&lt;NPC object name&gt;";
</font>

enablenpc "&lt;NPC object name&gt;";
        
        These two commands will disable and enable, respectively, an NPC object
        specified by name.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_doevent--">_doevent</a></span>()</code>
<div class="block">
<font color="red">
doevent "&lt;NPC object name&gt;::&lt;event label&gt;";
</font>

        
        This command will start a new execution thread in a specified NPC object at the
        specified label.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_donpcevent--">_donpcevent</a></span>()</code>
<div class="block">
<font color="red">
donpcevent "&lt;NPC object name&gt;::&lt;event label&gt;";
</font>

        
        This command invokes the event label code within an another NPC or NPCs.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_enablewaitingroomevent--">_enablewaitingroomevent</a></span>()</code>
<div class="block">
<font color="red">
enablewaitingroomevent {"&lt;NPC object name&gt;"};
</font>

disablewaitingroomevent {"&lt;NPC object name&gt;"};
enablearena;
disablearena;
        
        This will enable and disable triggering the waiting room event (see
        'waitingroom') respectively.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_getmapflag--">_getmapflag</a></span>()</code>
<div class="block">
<font color="red">
getmapflag("&lt;map name&gt;",&lt;flag&gt;{,&lt;type&gt;})
</font>

        
        This command checks the status of a given mapflag and returns the mapflag's state.
        0 means OFF, and 1 means ON.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_getwaitingroomstate--">_getwaitingroomstate</a></span>()</code>
<div class="block">
<font color="red">
getwaitingroomstate(&lt;information type&gt;{,"&lt;NPC object name&gt;"})
</font>

        
        This function will return information about the waiting room state for the
        attached waiting room or for a waiting room attached to the specified NPC if
        any.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_getwaitingroomusers--">_getwaitingroomusers</a></span>()</code>
<div class="block">
<font color="red">
getwaitingroomusers "&lt;NPC object name&gt;";
</font>

        
        This command get all the characters in the waiting room of the given NPC and stores
        their gids in the array .</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_hideonnpc--">_hideonnpc</a></span>()</code>
<div class="block">
<font color="red">
hideonnpc "&lt;NPC object name&gt;";
</font>

hideoffnpc "&lt;NPC object name&gt;";
        
        These commands will make the NPC object specified display as hidden/visible,
        even though not actually disabled per se.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_kickwaitingroomall--">_kickwaitingroomall</a></span>()</code>
<div class="block">
<font color="red">
kickwaitingroomall {"&lt;NPC object name&gt;"};
</font>

        
        This command kicks everybody out of a specified waiting room chat.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_killmonster--">_killmonster</a></span>()</code>
<div class="block">
<font color="red">
killmonster "&lt;map name&gt;","&lt;event label&gt;"{,&lt;type&gt;};
</font>

        
        This command will kill all monsters that were spawned with 'monster' or
        'addmonster' and have a specified event label attached to them.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_killmonsterall--">_killmonsterall</a></span>()</code>
<div class="block">
<font color="red">
killmonsterall "&lt;map name&gt;"{,&lt;type&gt;};
</font>

        
        This command will kill all monsters on a specified map name, regardless of how
        they were spawned or what they are.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_mapannounce--">_mapannounce</a></span>()</code>
<div class="block">
<font color="red">
mapannounce "&lt;map name&gt;","&lt;text&gt;",&lt;flag&gt;{,&lt;fontColor&gt;{,&lt;fontType&gt;{,&lt;fontSize&gt;{,&lt;fontAlign&gt;{,&lt;fontY&gt;}}}}}};
</font>

        
        This command will work like 'announce' but will only broadcast to characters
        currently residing on the specified map.</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_mapwarp--">_mapwarp</a></span>()</code>
<div class="block">
<font color="red">
mapwarp "&lt;from map&gt;","&lt;to map&gt;",&lt;x&gt;,&lt;y&gt;{,&lt;type&gt;,&lt;ID&gt;};
</font>

        
        This command will collect all characters located on the From map and warp them
        wholesale to the same point on the To map, or randomly distribute them there if
        the coordinates are zero.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_mobcount--">_mobcount</a></span>()</code>
<div class="block">
<font color="red">
mobcount("&lt;map name&gt;","&lt;event label&gt;")
</font>

        
        This function will count all the monsters on the specified map that have a given
        event label and return the number or 0 if it can't find any.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_monster--">_monster</a></span>()</code>
<div class="block">
<font color="red">
monster     "&lt;map name&gt;",&lt;x&gt;,&lt;y&gt;,"&lt;name to show&gt;",&lt;mob id&gt;,&lt;amount&gt;{,"&lt;event label&gt;",&lt;size&gt;,&lt;ai&gt;};
</font>

areamonster "&lt;map name&gt;",&lt;x1&gt;,&lt;y1&gt;,&lt;x2&gt;,&lt;y2&gt;,"&lt;name to show&gt;",&lt;mob id&gt;,&lt;amount&gt;{,"&lt;event label&gt;",&lt;size&gt;,&lt;ai&gt;};
        
        This command will spawn a monster on the specified coordinates on the specified
        map.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_movenpc--">_movenpc</a></span>()</code>
<div class="block">
<font color="red">
movenpc "&lt;NPC name&gt;",&lt;x&gt;,&lt;y&gt;{,&lt;dir&gt;};
</font>

        
        This command looks like the NPCWalkToxy function,but is a little different.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_npcshopadditem--">_npcshopadditem</a></span>()</code>
<div class="block">
<font color="red">
npcshopadditem "&lt;name&gt;",&lt;item id&gt;,&lt;price&gt;{,&lt;item id&gt;,&lt;price&gt;{,&lt;item id&gt;,&lt;price&gt;{,...}}};
</font>

        
        This command will add more items at the end of the selling list for the
        specified NPC shop or cashshop.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_npcshopattach--">_npcshopattach</a></span>()</code>
<div class="block">
<font color="red">
npcshopattach "&lt;name&gt;"{,&lt;flag&gt;};
</font>

        
        This command will attach the current script to the given NPC shop.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_npcshopdelitem--">_npcshopdelitem</a></span>()</code>
<div class="block">
<font color="red">
npcshopdelitem "&lt;name&gt;",&lt;item id&gt;{,&lt;item id&gt;{,&lt;item id&gt;{,...}}};
</font>

        
        This command will remove items from the specified NPC shop or cashshop.</div>
</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_npcshopitem--">_npcshopitem</a></span>()</code>
<div class="block">
<font color="red">
npcshopitem "&lt;name&gt;",&lt;item id&gt;,&lt;price&gt;{,&lt;item id&gt;,&lt;price&gt;{,&lt;item id&gt;,&lt;price&gt;{,...}}};
</font>

        
        This command lets you override the contents of an existing NPC shop or cashshop.</div>
</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_npcshopupdate--">_npcshopupdate</a></span>()</code>
<div class="block">
<font color="red">
npcshopupdate "&lt;name&gt;",&lt;item_id&gt;,&lt;price&gt;{,&lt;stock&gt;}
</font>

        
        Update an entry from shop.</div>
</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_npcspeed--">_npcspeed</a></span>()</code>
<div class="block">
<font color="red">
npcspeed &lt;speed value&gt;;
</font>

npcwalkto &lt;x&gt;,&lt;y&gt;;
npcstop;
        
        These commands will make the NPC object in question move around the map.</div>
</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_npctalk--">_npctalk</a></span>()</code>
<div class="block">
<font color="red">
npctalk "&lt;message&gt;"{,"&lt;NPC name&gt;","&lt;flag&gt;"};
</font>

        
        This command will display a message as if the NPC object running it was a player
        talking - that is, above their head and in the chat window.</div>
</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_removemapflag--">_removemapflag</a></span>()</code>
<div class="block">
<font color="red">
removemapflag "&lt;map name&gt;",&lt;flag&gt;{,&lt;zone&gt;};
</font>

        
        This command removes a mapflag from a specified map.</div>
</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_setbattleflag--">_setbattleflag</a></span>()</code>
<div class="block">
<font color="red">
setbattleflag "&lt;battle flag&gt;",&lt;value&gt;{,&lt;reload&gt;};
</font>

getbattleflag("&lt;battle flag&gt;")
        
        Sets or gets the value of the given battle flag.</div>
</td>
</tr>
<tr id="i34" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_setmapflag--">_setmapflag</a></span>()</code>
<div class="block">
<font color="red">
setmapflag "&lt;map name&gt;",&lt;flag&gt;{,&lt;zone&gt;{,&lt;type&gt;}};
</font>

        
        This command marks a specified map with the given map flag, which will alter the
        behavior of the map.</div>
</td>
</tr>
<tr id="i35" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_setmapflagnosave--">_setmapflagnosave</a></span>()</code>
<div class="block">
<font color="red">
setmapflagnosave "&lt;map name&gt;","&lt;alternate map name&gt;",&lt;x&gt;,&lt;y&gt;;
</font>

        
        This command sets the 'nosave' flag for the specified map and also gives an
        alternate respawn-upon-relogin point.</div>
</td>
</tr>
<tr id="i36" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_setnpcdisplay--">_setnpcdisplay</a></span>()</code>
<div class="block">
<font color="red">
setnpcdisplay("&lt;npc name&gt;", "&lt;display name&gt;", &lt;class id&gt;, &lt;size&gt;)
</font>

setnpcdisplay("&lt;npc name&gt;", "&lt;display name&gt;", &lt;class id&gt;)
setnpcdisplay("&lt;npc name&gt;", "&lt;display name&gt;")
setnpcdisplay("&lt;npc name&gt;", &lt;class id&gt;)
        
        Changes the display name and/or display class of the target NPC.</div>
</td>
</tr>
<tr id="i37" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_strmobinfo--">_strmobinfo</a></span>()</code>
<div class="block">
<font color="red">
strmobinfo(&lt;type&gt;,&lt;monster id&gt;);
</font>

        
        This function will return information about a monster record in the database, as
        per 'db/(pre-)re/mob_db.txt'.</div>
</td>
</tr>
<tr id="i38" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_summon--">_summon</a></span>()</code>
<div class="block">
<font color="red">
summon "monster name",&lt;monster id&gt;{,&lt;Time Out&gt;{,"event label"}};
</font>

        
        This command will summon a monster.</div>
</td>
</tr>
<tr id="i39" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_unloadnpc--">_unloadnpc</a></span>()</code>
<div class="block">
<font color="red">
unloadnpc "&lt;NPC object name&gt;";
</font>

        
        This command will fully unload a NPC object and all of it's duplicates.</div>
</td>
</tr>
<tr id="i40" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_waitingroom--">_waitingroom</a></span>()</code>
<div class="block">
<font color="red">
waitingroom "&lt;chatroom name&gt;",&lt;limit&gt;{,"&lt;event label&gt;"{,&lt;trigger&gt;{,&lt;required zeny&gt;{,&lt;min lvl&gt;{,&lt;max lvl&gt;}}}}};
</font>

        
        This command will create a chat room, owned by the NPC object running this
        script and displayed above the NPC sprite.</div>
</td>
</tr>
<tr id="i41" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_waitingroomkick--">_waitingroomkick</a></span>()</code>
<div class="block">
<font color="red">
waitingroomkick "&lt;NPC object name&gt;" , "&lt;character name&gt;";
</font>

        
        This command kicks the given character from the waiting room attached to the given NPC.</div>
</td>
</tr>
<tr id="i42" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_warpportal--">_warpportal</a></span>()</code>
<div class="block">
<font color="red">
warpportal &lt;source x&gt;,&lt;source y&gt;,"&lt;map name&gt;",&lt;target x&gt;,&lt;target y&gt;;
</font>

        
        Creates a warp portal identical to the Acolyte "Warp Portal" skill.</div>
</td>
</tr>
<tr id="i43" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html#Z:Z_warpwaitingpc--">_warpwaitingpc</a></span>()</code>
<div class="block">
<font color="red">
warpwaitingpc "&lt;map name&gt;",&lt;x&gt;,&lt;y&gt;{,&lt;number of people&gt;};
</font>

        
        This command will warp the amount of characters equal to the trigger number of
        the waiting room chat attached to the NPC object running this command to the
        specified map and coordinates, kicking them out of the chat.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="java.lang中的类或接口">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="java.lang中的类或接口">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="java.lang中的类或接口">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="java.lang中的类或接口">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="java.lang中的类或接口">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="java.lang中的类或接口">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="java.lang中的类或接口">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="java.lang中的类或接口">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="java.lang中的类或接口">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="java.lang中的类或接口">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="java.lang中的类或接口">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>构造器详细资料</h3>
<a name="Z:Z_0500_MOB_or_NPC_Commands--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>_0500_MOB_or_NPC_Commands</h4>
<pre>public&nbsp;_0500_MOB_or_NPC_Commands()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="Z:Z_monster--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_monster</h4>

<div class="block"><pre>
<font color="red">
monster     "&lt;map name&gt;",&lt;x&gt;,&lt;y&gt;,"&lt;name to show&gt;",&lt;mob id&gt;,&lt;amount&gt;{,"&lt;event label&gt;",&lt;size&gt;,&lt;ai&gt;};
areamonster "&lt;map name&gt;",&lt;x1&gt;,&lt;y1&gt;,&lt;x2&gt;,&lt;y2&gt;,"&lt;name to show&gt;",&lt;mob id&gt;,&lt;amount&gt;{,"&lt;event label&gt;",&lt;size&gt;,&lt;ai&gt;};
</font>

        
        This command will spawn a monster on the specified coordinates on the specified
        map. If the script is invoked by a character, a special map name, "this", will
        be recognized to mean the name of the map the invoking character is located at.
        This command works fine in the item scripts.
        
        The same command arguments mean the same things as described above in the
        beginning of this document when talking about permanent monster spawns. Monsters
        spawned in this manner will not respawn upon being killed.
        
        Unlike the permanent monster spawns, if the mob id is -1, a random monster will
        be picked from the entire database according to the rules configured in the
        server for dead branches. This will work for all other kinds of non-permanent
        monster spawns.
        
        The only very special thing about this command is an event label, which is an
        optional parameter. This label is written like '&lt;NPC object name&gt;::&lt;label name&gt;'
        and upon the monster being killed, it will execute the script inside of the
        specified NPC object starting from the label given. The RID of the player
        attached at this execution will be the RID of the killing character.
        The variable 'killedrid' is set to the Class (mob ID) of the monster killed.
        The variable 'killedgid' is set to the ID (unique mob game ID) of the monster killed.
        
        &lt;size&gt; can be:
                Size_Small      (0)             (default)
                Size_Medium     (1)
                Size_Large      (2)
        
        &lt;ai&gt; can be:
                AI_NONE         (0)             (default)
                AI_ATTACK       (1)             (attack/friendly)
                AI_SPHERE       (2)             (Alchemist skill)
                AI_FLORA        (3)             (Alchemist skill)
                AI_ZANZOU       (4)             (Kagerou/Oboro skill)
                AI_LEGION       (5)             (Sera skill)
                AI_FAW          (6)             (Mechanic skill)
        
            monster "place",60,100,"Poring",1002,1,"NPCNAME::OnLabel";
        
        The coordinates of 0,0 will spawn the monster on a random place on the map.
        
        The 'areamonster' command works much like the 'monster' command and is not
        significantly different, but spawns the monsters within a square defined by
        x1/y1-x2/y2.
        
        Returned value is an array with the game ID of the spawned monster(s) depending
        on the amount spawned. Array is stored in $@mobid[].
        
        Simple monster killing script:
        
                        &lt;Normal NPC object definition. Let's assume you called him NPCNAME.&gt;
                        mes "[Summon Man]";
                        mes "Want to start the Poring hunt?";
                        next;
                        if (select("Yes.:No.") == 2) {
                                mes "[Summon Man]";
                                mes "Come back later.";
                                close;
                        }
        
                        // Summon 10 Porings.
                        // Using coordinates 0,0 will spawn them in a random location.
                        monster "prontera",0,0,"Quest Poring",1002,10,"NPCNAME::OnPoringKilled";
        
                        mes "[Summon Man]";
                        mes "Now go and kill all the Porings I summoned.";
                        close;
        
                OnPoringKilled:
                        $PoringKilled++;
                        if ($PoringKilled &gt;= 10) {
                                announce "Summon Man: Well done. All the Porings are dead!",3;
                                $PoringKilled = 0;
                        }
                        end;
        
        For more good examples see just about any official 2-1 or 2-2 job quest script.
</pre></div>
</li>
</ul>
<a name="Z:Z_areamobuseskill--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_areamobuseskill</h4>

<div class="block"><pre>
<font color="red">
areamobuseskill "&lt;map name&gt;",&lt;x&gt;,&lt;y&gt;,&lt;range&gt;,&lt;mob id&gt;,&lt;skill id&gt;,&lt;skill level&gt;,&lt;cast time&gt;,&lt;cancelable&gt;,&lt;emotion&gt;,&lt;target type&gt;;
areamobuseskill "&lt;map name&gt;",&lt;x&gt;,&lt;y&gt;,&lt;range&gt;,&lt;mob id&gt;,"&lt;skill name&gt;",&lt;skill level&gt;,&lt;cast time&gt;,&lt;cancelable&gt;,&lt;emotion&gt;,&lt;target type&gt;;
</font>

        
        This command will make all monsters of the specified mob ID in the specified
        area use the specified skill. Map name, x, and y define the center of the area,
        which extending &lt;range&gt; cells in each direction (ex: a range of 3 would create
        a 7x7 square). The skill can be specified by skill ID or name. &lt;cast time&gt; is in
        milliseconds (1000 = 1 second), and the rest should be self-explanatory.
        
        &lt;target type&gt; can be:
                0 = self
                1 = the mob's current target
                2 = the mob's master
                3 = random target
        
        Example:
        
                // spawn 1 Shining Plant in the 5x5 area centered on (155,188)
                areamonster "prontera",153,186,157,190,"Shining Plant",1083,1;
                // make the plant cast level 10 Cold Bolt on a random target
                areamobuseskill "prontera",155,188,2,1083,"MG_COLDBOLT",10,3000,1,ET_KEK,3;
</pre></div>
</li>
</ul>
<a name="Z:Z_killmonster--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_killmonster</h4>

<div class="block"><pre>
<font color="red">
killmonster "&lt;map name&gt;","&lt;event label&gt;"{,&lt;type&gt;};
</font>

        
        This command will kill all monsters that were spawned with 'monster' or
        'addmonster' and have a specified event label attached to them. Commonly used to
        get rid of remaining quest monsters once the quest is complete.
        
        If the label is given as "All", all monsters which have their respawn times set
        to -1 (like all the monsters summoned with 'monster' or 'areamonster' script
        command, and all monsters summoned with GM commands, but no other ones - that
        is, all non-permanent monsters) on the specified map will be killed regardless
        of the event label value.
        
        As of r12876 killmonster now supports an optional argument type. Using 1 for type
        will make the command fire "OnMyMobDead" events from any monsters that do die
        as a result of this command.
</pre></div>
</li>
</ul>
<a name="Z:Z_killmonsterall--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_killmonsterall</h4>

<div class="block"><pre>
<font color="red">
killmonsterall "&lt;map name&gt;"{,&lt;type&gt;};
</font>

        
        This command will kill all monsters on a specified map name, regardless of how
        they were spawned or what they are. As of r12873, The behavior has changed slightly.
        In light of a label behavior fix for mob spawning commands that will now allow the label to
        trigger when there is no player, killmonsterall has also been modified to support this.
        
        Using this the normal/old way means labels don't trigger when a player didn't
        attack/kill a monster. This is because it breaks compatibility with older scripts if
        forced to use the new method. However, if you wish to use the new label type with this
        command, simply use 1 for type. Any other number won't be recognized.
</pre></div>
</li>
</ul>
<a name="Z:Z_strmobinfo--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_strmobinfo</h4>

<div class="block"><pre>
<font color="red">
strmobinfo(&lt;type&gt;,&lt;monster id&gt;);
</font>

        
        This function will return information about a monster record in the database, as
        per 'db/(pre-)re/mob_db.txt'. Type is the kind of information returned. Valid types are:
        It will return 0 if there is no such monster (or the type value is invalid),
        or an empty string if you requested the monster's name.
        
         1 - 'english name' field in the database, a string.
         2 - 'japanese name' field in the database, a string.
             All other returned values are numbers:
         3 - Level.
         4 - Maximum HP.
         5 - Maximum SP.
         6 - Experience reward.
         7 - Job experience reward.
</pre></div>
</li>
</ul>
<a name="Z:Z_mobcount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_mobcount</h4>

<div class="block"><pre>
<font color="red">
mobcount("&lt;map name&gt;","&lt;event label&gt;")
</font>

        
        This function will count all the monsters on the specified map that have a given
        event label and return the number or 0 if it can't find any. Naturally, only
        monsters spawned with 'monster' and 'areamonster' script commands can have non-empty
        event label.
        If you pass this function an empty string for the event label, it will return
        the total count of monster without event label, including permanently spawning monsters.
        With the dynamic mobs system enabled, where mobs are not kept
        in memory for maps with no actual people playing on them, this will return a 0
        for any such map.
        If the event label is given as "all", all monsters will be counted, regardless of
        having any event label attached.
        
        If the map name is given as "this", the map the invoking character is on will
        be used. If the map is not found, or the invoker is not a character while the map
        is "this", it will return -1.
</pre></div>
</li>
</ul>
<a name="Z:Z_clone--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_clone</h4>

<div class="block"><pre>
<font color="red">
clone "&lt;map name&gt;",&lt;x&gt;,&lt;y&gt;,"&lt;event&gt;",&lt;char id&gt;{,&lt;master_id&gt;{,&lt;mode&gt;{,&lt;flag&gt;,&lt;duration&gt;}}}
</font>

        
        This command creates a monster which is a copy of another player. The first
        four arguments serve the same purpose as in the monster script command, The
        &lt;char id&gt; is the character id of the player to clone (player must be online).
        If &lt;master id&gt; is given, the clone will be a 'slave/minion' of it. Master_id
        must be a character id of another online player.
        
        The mode can be specified to determine the behavior of the clone. Its
        values are the same as the ones used for the mode field in the mob_db. The
        default mode is aggressive, assists, can move, can attack.
        
        Flag can be either zero or one currently. If zero, the clone is a normal
        monster that'll target players, if one, it is considered a summoned monster,
        and as such, it'll target other monsters. Defaults to zero.
        
        The duration specifies how long the clone will live before it is auto-removed.
        Specified in seconds, defaults to no limit (zero).
        
        Returned value is the monster ID of the spawned clone. If command fails,
        returned value is zero.
</pre></div>
</li>
</ul>
<a name="Z:Z_summon--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_summon</h4>

<div class="block"><pre>
<font color="red">
summon "monster name",&lt;monster id&gt;{,&lt;Time Out&gt;{,"event label"}};
</font>

        
        This command will summon a monster. (see also 'monster') Unlike monsters spawned
        with other commands, this one will set up the monster to fight to protect the
        invoking character. Monster name and mob id obey the same rules as the one given
        at the beginning of this document for permanent monster spawns with the
        exceptions mentioned when describing 'monster' command.
        
        The effect for the skill 'Call Homunculus' will be displayed centered on the
        invoking character.
        
        Timeout is the time in milliseconds the summon lives, and is set default
        to 60000 (1 minute). Note that also the value 0 will set the timer to default,
        and it is not possible to create a spawn that lasts forever.
        If an event label is given, upon the monster being killed, the event label will
        run as if by 'donpcevent'.
        
        Returned value is the game ID of the spawned monster.
        
        // Will summon a dead branch-style monster to fight for the character.
        summon "--ja--",-1;
</pre></div>
</li>
</ul>
<a name="Z:Z_addmonsterdrop--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_addmonsterdrop</h4>

<div class="block"><pre>
<font color="red">
addmonsterdrop &lt;monster id&gt;,&lt;item id&gt;,&lt;rate&gt;;
addmonsterdrop "&lt;monster name&gt;",&lt;item id&gt;,&lt;rate&gt;;
delmonsterdrop &lt;monster id&gt;,&lt;item id&gt;;
delmonsterdrop "&lt;monster name&gt;",&lt;item id&gt;;
</font>

        
        These commands will temporarily add or delete a monster drop, which will be reset
        when the mob database reloads or the server shuts down. They return 1 upon success.
        
        If the monster already drops the specified item, its drop rate will be updated with
        the given rate (100 = 1%).
        
        Examples:
                // Makes Owl Baron drop Honey at an 80% rate.
                addmonsterdrop 1295,518,8000;
        
                // Deletes Executioner's Mitten from Rybio.
                delmonsterdrop 1201,7017;
</pre></div>
</li>
</ul>
<a name="Z:Z_disablenpc--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_disablenpc</h4>

<div class="block"><pre>
<font color="red">
disablenpc "&lt;NPC object name&gt;";
enablenpc "&lt;NPC object name&gt;";
</font>

        
        These two commands will disable and enable, respectively, an NPC object
        specified by name. The disabled NPC will disappear from sight and will no longer
        be triggerable in the normal way. It is not clear whether it will still be
        accessible through 'donpcevent' and other triggering commands, but it probably
        will be. You can disable even warp NPCs if you know their object names, which is
        an easy way to make a map only accessible through walking half the time. Then
        you 'enablenpc' them back.
        
        You can also use these commands to create the illusion of an NPC switching
        between several locations, which is often better than actually moving the NPC -
        create one NPC object with a visible and a hidden part to their name, make a few
        copies, and then disable all except one.
</pre></div>
</li>
</ul>
<a name="Z:Z_hideonnpc--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_hideonnpc</h4>

<div class="block"><pre>
<font color="red">
hideonnpc "&lt;NPC object name&gt;";
hideoffnpc "&lt;NPC object name&gt;";
</font>

        
        These commands will make the NPC object specified display as hidden/visible,
        even though not actually disabled per se. Hidden as in thief Hide skill, but
        unfortunately, not detectable by Ruwach or Sight.
        
        As they are now, these commands are pointless, it is suggested to use
        'disablenpc'/'enablenpc', because these two commands actually unload the NPC
        sprite location and other accompanying data from memory when it is not used.
        However, you can use these for some quest ideas (such as cloaking NPCs talking
        while hidden then revealing.... you can wonder around =P
</pre></div>
</li>
</ul>
<a name="Z:Z_unloadnpc--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_unloadnpc</h4>

<div class="block"><pre>
<font color="red">
unloadnpc "&lt;NPC object name&gt;";
</font>

        
        This command will fully unload a NPC object and all of it's duplicates.
</pre></div>
</li>
</ul>
<a name="Z:Z_doevent--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_doevent</h4>

<div class="block"><pre>
<font color="red">
doevent "&lt;NPC object name&gt;::&lt;event label&gt;";
</font>

        
        This command will start a new execution thread in a specified NPC object at the
        specified label. The execution of the script running this command will not stop,
        and the event called by the 'doevent' command will not run until the invoking
        script has terminated. No parameters may be passed with a doevent call.
        
        The script of the NPC object invoked in this manner will run as if it's been
        invoked by the RID that was active in the script that issued a 'doevent'. As
        such, the command will not work if an RID is not attached.
        
                place,100,100,1%TAB%script%TAB%NPC%TAB%53,{
                        mes "This is what you will see when you click me";
                        close;
                OnLabel:
                        mes "This is what you will see if the doevent is activated";
                        close;
                }
        
                ....
        
                doevent "NPC::OnLabel";
</pre></div>
</li>
</ul>
<a name="Z:Z_donpcevent--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_donpcevent</h4>

<div class="block"><pre>
<font color="red">
donpcevent "&lt;NPC object name&gt;::&lt;event label&gt;";
</font>

        
        This command invokes the event label code within an another NPC or NPCs. It
        starts a separate instance of execution, and the invoking NPC will resume
        execution its immediately.
        
        If the supplied event label has the form "NpcName::OnLabel", then only given
        NPC's event label will be invoked (much like 'goto' into another NPC). If the
        form is "::OnLabel" (NPC name omitted), the event code of all NPCs with given
        label will be invoked, one after another. In both cases the invoked script
        will run without an attached RID, whether or not the invoking script was
        attached to a player. The event label name is required to start with "On".
        
        This command can be used to make other NPCs act, as if they were responding to
        the invoking NPC's actions, such as using an emotion or talking.
        
                place,100,100,1%TAB%script%TAB%NPC1%TAB%53,{
                        mes "NPC2 copies my actions!";
                        close2;
                        donpcevent "NPC2::OnEmote";
                        end;
                OnEmote:
                        emotion rand(1,30);
                        end;
                }
        
                place,102,100,1%TAB%script%TAB%NPC2%TAB%53,{
                        mes "NPC1 copies my actions!";
                        close2;
                        donpcevent "NPC1::OnEmote";
                        end;
                OnEmote:
                        emotion rand(1,30);
                        end;
                }
        
        Whichever of the both NPCs is talked to, both will show a random emotion at the
        same time.
        
        As of r16564, command now returns 1 or 0 on success and failure.
        A debug message also shows on the console when no events are triggered.
</pre></div>
</li>
</ul>
<a name="Z:Z_cmdothernpc--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_cmdothernpc</h4>

<div class="block"><pre>
<font color="red">
cmdothernpc "&lt;npc name&gt;","&lt;command&gt;";
</font>

        
        This is simply "donpcevent &lt;npc name&gt;::OnCommand&lt;command&gt;".
        It is an approximation of official server script language's 'cmdothernpc'.
        
        Returns true if the command was executed on the other NPC successfully, false if not.
</pre></div>
</li>
</ul>
<a name="Z:Z_npctalk--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_npctalk</h4>

<div class="block"><pre>
<font color="red">
npctalk "&lt;message&gt;"{,"&lt;NPC name&gt;","&lt;flag&gt;"};
</font>

        
        This command will display a message as if the NPC object running it was a player
        talking - that is, above their head and in the chat window.
        The display name of the NPC won't get appended in front of the message.
        If the &lt;NPC name&gt; option is given and not empty, then that NPC will display the message,
        else the attached NPC will display the message.
        
        Target for &lt;flag&gt;:
        - bc_all  : Broadcast message is sent server-wide (only in the chat window).
        - bc_map  : Message is sent to everyone in the same map as the source of the npc.
        - bc_area : Message is sent to players in the vicinity of the source (default value).
        - bc_self : Message is sent only to player attached.
        
                // This will make everyone in the area see the NPC greet the character
                // who just invoked it.
                npctalk "Hello " + strcharinfo(0) + ", how are you?";
</pre></div>
</li>
</ul>
<a name="Z:Z_chatmes--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_chatmes</h4>

<div class="block"><pre>
<font color="red">
chatmes "&lt;message&gt;"{,"&lt;NPC name&gt;"};
</font>

        
        This command will display a message in the waitingroom (chat) of the NPC.
        If the &lt;NPC name&gt; option is given, then that NPC will display the message, else
        the attached NPC will display the message.
        If the NPC is not in a waitingroom, nothing happens.
        
                // Everyone in the waitingroom will see this message:
                chatmes "Waiting 5 minutes until the next match will start";
</pre></div>
</li>
</ul>
<a name="Z:Z_setnpcdisplay--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_setnpcdisplay</h4>

<div class="block"><pre>
<font color="red">
setnpcdisplay("&lt;npc name&gt;", "&lt;display name&gt;", &lt;class id&gt;, &lt;size&gt;);
setnpcdisplay("&lt;npc name&gt;", "&lt;display name&gt;", &lt;class id&gt;);
setnpcdisplay("&lt;npc name&gt;", "&lt;display name&gt;");
setnpcdisplay("&lt;npc name&gt;", &lt;class id&gt;);
</font>


        Changes the display name and/or display class of the target NPC.
        Returns 0 is successful, 1 if the NPC does not exist.
        Size is 0 = normal 1 = small 2 = big.
</pre></div>
</li>
</ul>
<a name="Z:Z_announce--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_announce</h4>

<div class="block"><pre>
<font color="red">
announce "&lt;text&gt;",&lt;flag&gt;{,&lt;fontColor&gt;{,&lt;fontType&gt;{,&lt;fontSize&gt;{,&lt;fontAlign&gt;{,&lt;fontY&gt;}}}}};
</font>

        
        This command will broadcast a message to all or most players, similar to</div>
</li>
</ul>
<a name="Z:Z_mapannounce--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_mapannounce</h4>

<div class="block"><pre>
<font color="red">
mapannounce "&lt;map name&gt;","&lt;text&gt;",&lt;flag&gt;{,&lt;fontColor&gt;{,&lt;fontType&gt;{,&lt;fontSize&gt;{,&lt;fontAlign&gt;{,&lt;fontY&gt;}}}}}};
</font>

        
        This command will work like 'announce' but will only broadcast to characters
        currently residing on the specified map. The flag and optional parameters
        parameters are the same as in 'announce', but target and source flags are ignored.
</pre></div>
</li>
</ul>
<a name="Z:Z_areaannounce--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_areaannounce</h4>

<div class="block"><pre>
<font color="red">
areaannounce "&lt;map name&gt;",&lt;x1&gt;,&lt;y1&gt;,&lt;x2&gt;,&lt;y2&gt;,"&lt;text&gt;",&lt;flag&gt;{,&lt;fontColor&gt;{,&lt;fontType&gt;{,&lt;fontSize&gt;{,&lt;fontAlign&gt;{,&lt;fontY&gt;}}}}}};
</font>

        
        This command works like 'announce' but will only broadcast to characters
        residing in the specified x1/y1-x2/y2 rectangle on the map given. The flags and
        optional parameters are the same as in 'announce', but target and source flags are ignored.
        
                areaannounce "prt_church",0,0,350,350,"God's in his heaven, all right with the world",0;
</pre></div>
</li>
</ul>
<a name="Z:Z_callshop--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_callshop</h4>

<div class="block"><pre>
<font color="red">
callshop "&lt;name&gt;",&lt;option&gt;;
</font>

        
        These are a series of commands used to create dynamic shops.
        The 'callshop' function calls an invisible shop (view -1) as if the player clicked on it.
        
        The options are:
                0 = The normal window (buy, sell and cancel)
                1 = The buy window
                2 = The sell window
        
        Note: The &lt;option&gt; parameter only works on the 'shop' type NPC.
        
        A shop called with this command will trigger the labels "OnBuyItem" and "OnSellItem"
        (as long as an npcshop* command is executed from that NPC, see note below). These
        labels, if used, will replace how the shop handles the buying and selling of items,
        allowing for the creation of dynamic shops.
        
        The label "OnBuyItem" sets the following arrays:</div>
</li>
</ul>
<a name="Z:Z_npcshopitem--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_npcshopitem</h4>

<div class="block"><pre>
<font color="red">
npcshopitem "&lt;name&gt;",&lt;item id&gt;,&lt;price&gt;{,&lt;item id&gt;,&lt;price&gt;{,&lt;item id&gt;,&lt;price&gt;{,...}}};
</font>

        
        This command lets you override the contents of an existing NPC shop or cashshop. The
        current sell list will be wiped, and only the items specified with the price
        specified will be for sale.
        
        The function returns 1 if shop was updated successfully, or 0 if not found.
        
        NOTES:
         - That you cannot use -1 to specify default selling price!
         - If attached shop type is market shop, need an extra param after price, it's &lt;qty&gt;
           and make sure don't add duplication item!
</pre></div>
</li>
</ul>
<a name="Z:Z_npcshopadditem--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_npcshopadditem</h4>

<div class="block"><pre>
<font color="red">
npcshopadditem "&lt;name&gt;",&lt;item id&gt;,&lt;price&gt;{,&lt;item id&gt;,&lt;price&gt;{,&lt;item id&gt;,&lt;price&gt;{,...}}};
</font>

        
        This command will add more items at the end of the selling list for the
        specified NPC shop or cashshop. If you specify an item already for sell, that item will
        appear twice on the sell list.
        
        The function returns 1 if shop was updated successfully, or 0 if not found.
        
        NOTES:
         - That you cannot use -1 to specify default selling price!
         - If attached shop type is market shop, need an extra param after price, it's &lt;qty&gt;
           and make sure don't add duplication item!
</pre></div>
</li>
</ul>
<a name="Z:Z_npcshopdelitem--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_npcshopdelitem</h4>

<div class="block"><pre>
<font color="red">
npcshopdelitem "&lt;name&gt;",&lt;item id&gt;{,&lt;item id&gt;{,&lt;item id&gt;{,...}}};
</font>

        
        This command will remove items from the specified NPC shop or cashshop.
        If the item to remove exists more than once on the shop, all instances will be
        removed.
        
        Note that the function returns 1 even if no items were removed. The return
        value is only to confirm that the shop was indeed found.
</pre></div>
</li>
</ul>
<a name="Z:Z_npcshopattach--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_npcshopattach</h4>

<div class="block"><pre>
<font color="red">
npcshopattach "&lt;name&gt;"{,&lt;flag&gt;};
</font>

        
        This command will attach the current script to the given NPC shop.
        When a script is attached to a shop, the events "OnBuyItem" and "OnSellItem"
        of your script will be executed whenever a player buys/sells from the shop.
        Additionally, the arrays @bought_nameid[], @bought_quantity[] or @sold_nameid[]
        and @sold_quantity[] will be filled up with the items and quantities
        bought/sold.
        
        The optional parameter specifies whether to attach ("1") or detach ("0") from
        the shop (the default is to attach). Note that detaching will detach any NPC
        attached to the shop, even if it's from another script, while attaching will
        override any other script that may be already attached.
        
        The function returns 0 if the shop was not found, 1 otherwise.
        
        NOTES:
         - If attached shop type is market shop, will be default to call the 'buy' window.
</pre></div>
</li>
</ul>
<a name="Z:Z_npcshopupdate--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_npcshopupdate</h4>

<div class="block"><pre>
<font color="red">
npcshopupdate "&lt;name&gt;",&lt;item_id&gt;,&lt;price&gt;{,&lt;stock&gt;}
</font>

        
        Update an entry from shop. If price is 0 means don't change the price, maybe used for
        marketshop to update the stock quantity. Except marketshop type, 'stock' value means
        nothing.
</pre></div>
</li>
</ul>
<a name="Z:Z_waitingroom--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_waitingroom</h4>

<div class="block"><pre>
<font color="red">
waitingroom "&lt;chatroom name&gt;",&lt;limit&gt;{,"&lt;event label&gt;"{,&lt;trigger&gt;{,&lt;required zeny&gt;{,&lt;min lvl&gt;{,&lt;max lvl&gt;}}}}};
</font>

        
        This command will create a chat room, owned by the NPC object running this
        script and displayed above the NPC sprite.
        The maximum length of a chat room name is 60 letters.
        
        The limit is the maximum number of people allowed to enter the chat room.
        The attached NPC is included in this count. If the optional event and trigger
        parameters are given, the event label ("&lt;NPC object name&gt;::&lt;label name&gt;")
        will be invoked as if with a 'doevent' upon the number of people in the chat
        room reaching the given triggering amount.
        
        // The NPC will just show a box above its head that says "Hello World", clicking
        // it will do nothing, since the limit is zero.
            waitingroom "Hello World",0;
        
        // The NPC will have a box above its head, it will say "Disco - Waiting Room"
        // and will have 8 waiting slots. Clicking this will enter the chat room, where
        // the player will be able to wait until 7 players accumulate. Once this happens,
        // it will cause the NPC "Bouncer" run the label "OnStart".
        
            waitingroom "Disco - Waiting Room",8,"Bouncer::OnStart",7;
        
        // The NPC will have a box above its head, it will say "Party - Waiting Room"
        // and will have 8 waiting slots. Clicking this will allow a player who has
        // 5000 zeny and lvl 50~99 to enter the chat room, where the player will be
        // able to wait until 7 players accumulate. Once this happens, it will cause
        // the NPC "Bouncer" run the label "OnStart".
        
                waitingroom "Party - Waiting Room",8,"Bouncer::OnStart",7,5000,50,99;
        
        Creating a waiting room does not stop the execution of the script and it will
        continue to the next line.
        
        For more examples see the 2-1 and 2-2 job quest scripts which make extensive use
        of waiting rooms.
</pre></div>
</li>
</ul>
<a name="Z:Z_delwaitingroom--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_delwaitingroom</h4>

<div class="block"><pre>
<font color="red">
delwaitingroom {"&lt;NPC object name"};
</font>

        
        This command will delete a waiting room. If no parameter is given, it will
        delete a waiting room attached to the NPC object running this command, if it is,
        it will delete a waiting room owned by another NPC object. This is the only way
        to get rid of a waiting room, nothing else will cause it to disappear.
        
        It's not clear what happens to a waiting room if the NPC is disabled with
        'disablenpc', by the way.
</pre></div>
</li>
</ul>
<a name="Z:Z_enablewaitingroomevent--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_enablewaitingroomevent</h4>

<div class="block"><pre>
<font color="red">
enablewaitingroomevent {"&lt;NPC object name&gt;"};
disablewaitingroomevent {"&lt;NPC object name&gt;"};
enablearena;
disablearena;
</font>

        
        This will enable and disable triggering the waiting room event (see
        'waitingroom') respectively. Optionally giving an NPC object name will do that
        for a specified NPC object. The chat room will not disappear when triggering is
        disabled and enabled in this manner and players will not be kicked out of it.
        Enabling a chat room event will also cause it to immediately check whether the
        number of users in it exceeded the trigger amount and trigger the event
        accordingly.
        
        Normally, whenever a waiting room was created to make sure that only one
        character is, for example, trying to pass a job quest trial, and no other
        characters are present in the room to mess up the script.
        
        The 'enablearena'/'disablearena' commands are just aliases with no parameter.
        These are supposedly left here for compatibility with official server scripts,
        but no rAthena script uses these at the moment.
</pre></div>
</li>
</ul>
<a name="Z:Z_getwaitingroomstate--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_getwaitingroomstate</h4>

<div class="block"><pre>
<font color="red">
getwaitingroomstate(&lt;information type&gt;{,"&lt;NPC object name&gt;"})
</font>

        
        This function will return information about the waiting room state for the
        attached waiting room or for a waiting room attached to the specified NPC if
        any.
        
        The valid information types are:
        
         0  - Number of users currently chatting.
         1  - Maximum number of users allowed.
         2  - Will return 1 if the waiting room has a trigger set.
              0 otherwise.
         3  - Will return 1 if the waiting room is currently disabled.
              0 otherwise.
         4  - The Title of the waiting room (string)
         5  - Password of the waiting room, if any. Pointless, since there is no way to
              set a password on a waiting room right now.
         16 - Event name of the waiting room (string)
         32 - Whether or not the waiting room is full.
         33 - Whether the amount of users in the waiting room is higher than the trigger
              number.
</pre></div>
</li>
</ul>
<a name="Z:Z_warpwaitingpc--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_warpwaitingpc</h4>

<div class="block"><pre>
<font color="red">
warpwaitingpc "&lt;map name&gt;",&lt;x&gt;,&lt;y&gt;{,&lt;number of people&gt;};
</font>

        
        This command will warp the amount of characters equal to the trigger number of
        the waiting room chat attached to the NPC object running this command to the
        specified map and coordinates, kicking them out of the chat. Those waiting the
        longest will get warped first. It can also do a random warp on the same map
        ("Random" instead of map name) and warp to the save point ("SavePoint").
        
        The list of characters to warp is taken from the list of the chat room members.
        Those not in the chat room will not be considered even if they are talking to
        the NPC in question. If the number of people is given, exactly this much people
        will be warped.
        
        This command can also keep track of who just got warped. It does this by setting
        special variables:
        
        $@warpwaitingpc[] is an array containing the account_id numbers of the
                          characters who were just warped.
        $@warpwaitingpcnum contains the number of the character it just warped.
        
        See also 'getpartymember' for advice on what to do with those variables.
        
        The obvious way of using this effectively would be to set up a waiting room for
        two characters to be warped onto a random PVP map for a one-on-one duel, for
        example.
</pre></div>
</li>
</ul>
<a name="Z:Z_waitingroomkick--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_waitingroomkick</h4>

<div class="block"><pre>
<font color="red">
waitingroomkick "&lt;NPC object name&gt;" , "&lt;character name&gt;";
</font>

        
        This command kicks the given character from the waiting room attached to the given NPC.
</pre></div>
</li>
</ul>
<a name="Z:Z_getwaitingroomusers--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_getwaitingroomusers</h4>

<div class="block"><pre>
<font color="red">
getwaitingroomusers "&lt;NPC object name&gt;";
</font>

        
        This command get all the characters in the waiting room of the given NPC and stores
        their gids in the array .@waitingroom_users[]. Also, stores the number of characters
        in the variable .@waitingroom_usercount.
</pre></div>
</li>
</ul>
<a name="Z:Z_kickwaitingroomall--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_kickwaitingroomall</h4>

<div class="block"><pre>
<font color="red">
kickwaitingroomall {"&lt;NPC object name&gt;"};
</font>

        
        This command kicks everybody out of a specified waiting room chat.
</pre></div>
</li>
</ul>
<a name="Z:Z_setmapflagnosave--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_setmapflagnosave</h4>

<div class="block"><pre>
<font color="red">
setmapflagnosave "&lt;map name&gt;","&lt;alternate map name&gt;",&lt;x&gt;,&lt;y&gt;;
</font>

        
        This command sets the 'nosave' flag for the specified map and also gives an
        alternate respawn-upon-relogin point.
        
        It does not make a map impossible to make a save point on as you would normally
        think, 'savepoint' will still work. It will, however, make the specified map
        kick the reconnecting players off to the alternate map given to the coordinates
        specified.
</pre></div>
</li>
</ul>
<a name="Z:Z_setmapflag--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_setmapflag</h4>

<div class="block"><pre>
<font color="red">
setmapflag "&lt;map name&gt;",&lt;flag&gt;{,&lt;zone&gt;{,&lt;type&gt;}};
</font>

        
        This command marks a specified map with the given map flag, which will alter the
        behavior of the map. A full list of mapflags is located in 'src/map/script_constants.hpp' with
        the 'mf_' prefix, and documentation can be found in 'doc/mapflags.txt'.
        
        The map flags alter the behavior of the map regarding teleporting (mf_nomemo,
        mf_noteleport, mf_nowarp, mf_nogo), storing location when disconnected
        (mf_nosave), dead branch usage (mf_nobranch), penalties upon death
        (mf_nopenalty, mf_nozenypenalty), PVP behavior (mf_pvp, mf_pvp_noparty,
        mf_pvp_noguild), WoE behavior (mf_gvg,mf_gvg_noparty), ability to use
        skills or open up trade deals (mf_notrade, mf_novending, mf_noskill, mf_noicewall),
        current weather effects (mf_snow, mf_fog, mf_sakura, mf_leaves, mf_rain, mf_clouds,
        mf_fireworks) and whether night will be in effect on this map (mf_nightenabled).
        
        The optional parameter &lt;zone&gt; is used to set the zone for 'restricted' mapflags,
        GM level bypass for 'nocommand', base/job experience for 'bexp'/'jexp', and
        flag for 'battleground'.
        
        For 'skill_damage' mapflag:
                - Setting the flag here will adjust the global (all skills) damage on the map.
                - &lt;zone&gt; is the -100 to 100000 damage adjustment value of the skills.
                - See 'getmapflag' for the different &lt;type&gt; values.
        For 'skill_duration' mapflag:
                - &lt;zone&gt; is the skill ID to adjust.
                - &lt;type&gt; is the percentage of adjustment from 0 to 100000.
</pre></div>
</li>
</ul>
<a name="Z:Z_removemapflag--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_removemapflag</h4>

<div class="block"><pre>
<font color="red">
removemapflag "&lt;map name&gt;",&lt;flag&gt;{,&lt;zone&gt;};
</font>

        
        This command removes a mapflag from a specified map.
        See 'setmapflag' for a list of mapflags.
        
        The optional parameter 'zone' is used to remove the zone from restricted mapflags.
</pre></div>
</li>
</ul>
<a name="Z:Z_getmapflag--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_getmapflag</h4>

<div class="block"><pre>
<font color="red">
getmapflag("&lt;map name&gt;",&lt;flag&gt;{,&lt;type&gt;})
</font>

        
        This command checks the status of a given mapflag and returns the mapflag's state.
        0 means OFF, and 1 means ON. See 'setmapflag' for a list of mapflags.
        
        For MF_RESTRICTED, the zone value of the map is returned.
        
        The optional parameter 'type' is used in the 'skill_damage' mapflag:
         SKILLDMG_MAX: if mapflag is set (default)
         SKILLDMG_PC: damage against players
         SKILLDMG_MOB: damage against mobs
         SKILLDMG_BOSS: damage against bosses
         SKILLDMG_OTHER: damage against other
         SKILLDMG_CASTER: caster type
</pre></div>
</li>
</ul>
<a name="Z:Z_setbattleflag--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_setbattleflag</h4>

<div class="block"><pre>
<font color="red">
setbattleflag "&lt;battle flag&gt;",&lt;value&gt;{,&lt;reload&gt;};
getbattleflag("&lt;battle flag&gt;");
</font>

        
        Sets or gets the value of the given battle flag.
        Battle flags are the flags found in the battle / *.conf files and is also used in Lupus' variable rates script.
        If the reload value is given then the server will attempt to reload monster data
        to properly apply the new rates. This applies to EXP/Drop type configs. The server
        will only attempt to reload specific configs.
        
        Examples:
        
        // Will set the base experience rate to 20x (2000%) - Monster data will continue to use previous rates at server start
                setBattleFlag "base_exp_rate",2000;
        
        // Will set the base experience rate to 20x (2000%) - Monster data will be reloaded to new value
                setBattleFlag "base_exp_rate",2000,true;
        
        // Will return the value of the base experience rate (when used after the above example, it would print 2000).
                mes getBattleFlag("base_exp_rate");
</pre></div>
</li>
</ul>
<a name="Z:Z_warpportal--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_warpportal</h4>

<div class="block"><pre>
<font color="red">
warpportal &lt;source x&gt;,&lt;source y&gt;,"&lt;map name&gt;",&lt;target x&gt;,&lt;target y&gt;;
</font>

        
        Creates a warp portal identical to the Acolyte "Warp Portal" skill.
        The source coordinates specify the portal's location on the map of the invoking NPC.
        The target map and coordinates determine the destination of the portal.
        
        Examples:
        
        // Will create a warp portal on the NPC's map at 150,150 leading to prontera, coords 150,180.
                warpportal 150,150,"prontera",150,180;
</pre></div>
</li>
</ul>
<a name="Z:Z_mapwarp--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_mapwarp</h4>

<div class="block"><pre>
<font color="red">
mapwarp "&lt;from map&gt;","&lt;to map&gt;",&lt;x&gt;,&lt;y&gt;{,&lt;type&gt;,&lt;ID&gt;};
</font>

        
        This command will collect all characters located on the From map and warp them
        wholesale to the same point on the To map, or randomly distribute them there if
        the coordinates are zero. "Random" is understood as a special To map name and
        will mean randomly shuffling everyone on the same map.
        
        Optionally, a type and ID can be specified. Available types are:
        
         0 - Everyone
         1 - Guild
         2 - Party
        
        Example:
        
        // Will warp all members of guild with ID 63 on map prontera to map alberta.
                mapwarp "prontera","alberta",150,150,1,63;
</pre></div>
</li>
</ul>
<a name="Z:Z_npcspeed--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_npcspeed</h4>

<div class="block"><pre>
<font color="red">
npcspeed &lt;speed value&gt;;
npcwalkto &lt;x&gt;,&lt;y&gt;;
npcstop;
</font>

        
        These commands will make the NPC object in question move around the map. As they
        currently are, they are a bit buggy and are not useful for much more than making
        an NPC move randomly around the map.
        
        'npcspeed' will set the NPCs walking speed to a specified value. As in the</div>
</li>
</ul>
<a name="Z:Z_movenpc--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>_movenpc</h4>

<div class="block"><pre>
<font color="red">
movenpc "&lt;NPC name&gt;",&lt;x&gt;,&lt;y&gt;{,&lt;dir&gt;};
</font>

        
        This command looks like the NPCWalkToxy function,but is a little different.
        
        While NPCWalkToXY just makes the NPC 'walk' to the coordinates given (which
        sometimes gives problems if the path isn't a straight line without objects),
        this command just moves the NPC. It basically warps out and in on the current
        and given spot. Direction can be used to change the NPC's facing direction.
        
        Example:
        
        // This will move Bugga from it's old coordinates to the new coordinates at 100,20 (if those coordinates are legit).
                moveNPC "Bugga",100,20;
</pre></div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="class-use/_0500_MOB_or_NPC_Commands.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>上一个类</li>
<li><a href="../../../../../exp/ro/cmd/ch/_05_mob_npc/_0501_Time_Related.html" title="exp.ro.cmd.ch._05_mob_npc中的类"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?exp/ro/cmd/ch/_05_mob_npc/_0500_MOB_or_NPC_Commands.html" target="_top">框架</a></li>
<li><a href="_0500_MOB_or_NPC_Commands.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li>嵌套&nbsp;|&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li>字段&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 工程的初始时间(可选)&#x2013;2019. All rights reserved.</small></p>
</body>
</html>
